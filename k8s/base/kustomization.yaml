apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Multi-namespace architecture - base deployment
# Each component (frontend, backend, database) runs in its own namespace

# Resources to deploy from each namespace
resources:
  - database/
  - backend/
  - frontend/

# Common labels to add to all resources
commonLabels:
  app.kubernetes.io/name: bookstore
  app.kubernetes.io/version: "1.0"
  app.kubernetes.io/managed-by: kustomize

# Common annotations
commonAnnotations:
  managed.by: kustomize
  deployment.pattern: multi-namespace-architecture

# Images to use
images:
  - name: backend
    newName: ghcr.io/abdulftah/bookstore-backend
    newTag: latest
  - name: frontend
    newName: ghcr.io/abdulftah/bookstore-frontend
    newTag: latest
  - name: mysql
    newName: mysql
    newTag: "8.0"
  - name: redis
    newName: redis
    newTag: "7"

